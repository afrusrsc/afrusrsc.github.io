<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>从Delphi到Go——基础 | 慢步道人</title>
<meta name="keywords" content="go, delphi, pascal">
<meta name="description" content="从其它平台迁移而来
废话 长期从事Delphi开发，虽不敢说精通，但说很熟悉还是相当有自信的。不过，只会一门语言，而且还是这么老的语言，更是在大天朝很小众的语言，总感觉自己离饿死街头没多远了，所以趁着还没老再学个潮点的吧。
先前考虑过Python，初步了解后觉得不太适合自己：
解释型语言：部署时得先搞个运行环境，发布的程序就是源码本身，再加上这个执行效率，怎么想都还是编译型语言更合适。
动态语言：无需声明，拿来就用，这已经很不合习惯了。想想一个变量，前一秒还是浮点数，下一秒就成字符串了，再一眨眼又成某个对象了……虽然一般不会有人这么写，但是挡不住手误啊，还是把这种小细节交给编译器更让人放心。
所以，对于有点强迫症和洁癖的自己，最后还是选了Go，比较符合已有的编程习惯，学习成本应该相对会低些吧。
至于Go嘛，想学是已经很久了，但由于种种原因却迟迟未开启，不过终究还是要迈出这一步的，所以就搞这么个系列来记录吧，一方面算是自我督促，另一方面也算是一种交流吧，当然，若一不留神帮上了谁，那自是开心极了。
言归正传 已经初步了解过了Go，说来和Delphi还是有不少相似之处呢，从Delphi转向Go应该会比较轻松吧。
工程结构 Delphi的工程算是比较自由的，源码的话，只要把单元路径引了或是直接包含进工程单元里就可以了，编译出的dcu和最终的exe指定下路径也就没问题了，通常我都使用下面这种结构：
1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ src/ dcu/ mod1/ *.dfm *.pas mod2/ *.dfm *.pas *.dpr 不过，每一个工程都要设置，而且我习惯将Debug和Release设置完全一样，也还真是够烦的。
Go就没得选了，只有一种结构：
1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ pkg/ src/ *.go mod1/ *.go *_test.go mod2/ *.go *_test.go 整体和我原有的习惯差不多，还是蛮容易接受的，不过倒是要把这Project的路径加入到GOPATH系统变量里让人有一点小不爽。但是Go可以直接把测试都写了，这点还是蛮让我惊喜的，毕竟用了这么多年Delphi也没写过一行像样的测试。
源码结构 Delphi典型的源码结构是这样：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 unit Unit1; interface uses .">
<meta name="author" content="慢步道人">
<link rel="canonical" href="https://afrusrsc.github.io/posts/program/go/go_delphi_base/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.828576b1a5476849c84c82cb78a8b046f6f0bebcd9505652f39a5ee58fa4dcaf.css" integrity="sha256-goV2saVHaEnITILLeKiwRvbwvrzZUFZS85pe5Y&#43;k3K8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://afrusrsc.github.io/img/icon.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://afrusrsc.github.io/img/icon.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="https://afrusrsc.github.io/img/icon.jpg">
<link rel="apple-touch-icon" href="https://afrusrsc.github.io/img/icon.jpg">
<link rel="mask-icon" href="https://afrusrsc.github.io/img/icon.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://afrusrsc.github.io/posts/program/go/go_delphi_base/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:title" content="从Delphi到Go——基础" />
<meta property="og:description" content="从其它平台迁移而来
废话 长期从事Delphi开发，虽不敢说精通，但说很熟悉还是相当有自信的。不过，只会一门语言，而且还是这么老的语言，更是在大天朝很小众的语言，总感觉自己离饿死街头没多远了，所以趁着还没老再学个潮点的吧。
先前考虑过Python，初步了解后觉得不太适合自己：
解释型语言：部署时得先搞个运行环境，发布的程序就是源码本身，再加上这个执行效率，怎么想都还是编译型语言更合适。
动态语言：无需声明，拿来就用，这已经很不合习惯了。想想一个变量，前一秒还是浮点数，下一秒就成字符串了，再一眨眼又成某个对象了……虽然一般不会有人这么写，但是挡不住手误啊，还是把这种小细节交给编译器更让人放心。
所以，对于有点强迫症和洁癖的自己，最后还是选了Go，比较符合已有的编程习惯，学习成本应该相对会低些吧。
至于Go嘛，想学是已经很久了，但由于种种原因却迟迟未开启，不过终究还是要迈出这一步的，所以就搞这么个系列来记录吧，一方面算是自我督促，另一方面也算是一种交流吧，当然，若一不留神帮上了谁，那自是开心极了。
言归正传 已经初步了解过了Go，说来和Delphi还是有不少相似之处呢，从Delphi转向Go应该会比较轻松吧。
工程结构 Delphi的工程算是比较自由的，源码的话，只要把单元路径引了或是直接包含进工程单元里就可以了，编译出的dcu和最终的exe指定下路径也就没问题了，通常我都使用下面这种结构：
1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ src/ dcu/ mod1/ *.dfm *.pas mod2/ *.dfm *.pas *.dpr 不过，每一个工程都要设置，而且我习惯将Debug和Release设置完全一样，也还真是够烦的。
Go就没得选了，只有一种结构：
1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ pkg/ src/ *.go mod1/ *.go *_test.go mod2/ *.go *_test.go 整体和我原有的习惯差不多，还是蛮容易接受的，不过倒是要把这Project的路径加入到GOPATH系统变量里让人有一点小不爽。但是Go可以直接把测试都写了，这点还是蛮让我惊喜的，毕竟用了这么多年Delphi也没写过一行像样的测试。
源码结构 Delphi典型的源码结构是这样：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 unit Unit1; interface uses ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://afrusrsc.github.io/posts/program/go/go_delphi_base/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-09T23:30:04+08:00" />
<meta property="article:modified_time" content="2019-09-09T23:30:04+08:00" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="从Delphi到Go——基础"/>
<meta name="twitter:description" content="从其它平台迁移而来
废话 长期从事Delphi开发，虽不敢说精通，但说很熟悉还是相当有自信的。不过，只会一门语言，而且还是这么老的语言，更是在大天朝很小众的语言，总感觉自己离饿死街头没多远了，所以趁着还没老再学个潮点的吧。
先前考虑过Python，初步了解后觉得不太适合自己：
解释型语言：部署时得先搞个运行环境，发布的程序就是源码本身，再加上这个执行效率，怎么想都还是编译型语言更合适。
动态语言：无需声明，拿来就用，这已经很不合习惯了。想想一个变量，前一秒还是浮点数，下一秒就成字符串了，再一眨眼又成某个对象了……虽然一般不会有人这么写，但是挡不住手误啊，还是把这种小细节交给编译器更让人放心。
所以，对于有点强迫症和洁癖的自己，最后还是选了Go，比较符合已有的编程习惯，学习成本应该相对会低些吧。
至于Go嘛，想学是已经很久了，但由于种种原因却迟迟未开启，不过终究还是要迈出这一步的，所以就搞这么个系列来记录吧，一方面算是自我督促，另一方面也算是一种交流吧，当然，若一不留神帮上了谁，那自是开心极了。
言归正传 已经初步了解过了Go，说来和Delphi还是有不少相似之处呢，从Delphi转向Go应该会比较轻松吧。
工程结构 Delphi的工程算是比较自由的，源码的话，只要把单元路径引了或是直接包含进工程单元里就可以了，编译出的dcu和最终的exe指定下路径也就没问题了，通常我都使用下面这种结构：
1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ src/ dcu/ mod1/ *.dfm *.pas mod2/ *.dfm *.pas *.dpr 不过，每一个工程都要设置，而且我习惯将Debug和Release设置完全一样，也还真是够烦的。
Go就没得选了，只有一种结构：
1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ pkg/ src/ *.go mod1/ *.go *_test.go mod2/ *.go *_test.go 整体和我原有的习惯差不多，还是蛮容易接受的，不过倒是要把这Project的路径加入到GOPATH系统变量里让人有一点小不爽。但是Go可以直接把测试都写了，这点还是蛮让我惊喜的，毕竟用了这么多年Delphi也没写过一行像样的测试。
源码结构 Delphi典型的源码结构是这样：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 unit Unit1; interface uses ."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚文章",
      "item": "https://afrusrsc.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "💻编程开发",
      "item": "https://afrusrsc.github.io/posts/program/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "⚔️golang",
      "item": "https://afrusrsc.github.io/posts/program/go/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "从Delphi到Go——基础",
      "item": "https://afrusrsc.github.io/posts/program/go/go_delphi_base/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "从Delphi到Go——基础",
  "name": "从Delphi到Go——基础",
  "description": "从其它平台迁移而来\n废话 长期从事Delphi开发，虽不敢说精通，但说很熟悉还是相当有自信的。不过，只会一门语言，而且还是这么老的语言，更是在大天朝很小众的语言，总感觉自己离饿死街头没多远了，所以趁着还没老再学个潮点的吧。\n先前考虑过Python，初步了解后觉得不太适合自己：\n解释型语言：部署时得先搞个运行环境，发布的程序就是源码本身，再加上这个执行效率，怎么想都还是编译型语言更合适。\n动态语言：无需声明，拿来就用，这已经很不合习惯了。想想一个变量，前一秒还是浮点数，下一秒就成字符串了，再一眨眼又成某个对象了……虽然一般不会有人这么写，但是挡不住手误啊，还是把这种小细节交给编译器更让人放心。\n所以，对于有点强迫症和洁癖的自己，最后还是选了Go，比较符合已有的编程习惯，学习成本应该相对会低些吧。\n至于Go嘛，想学是已经很久了，但由于种种原因却迟迟未开启，不过终究还是要迈出这一步的，所以就搞这么个系列来记录吧，一方面算是自我督促，另一方面也算是一种交流吧，当然，若一不留神帮上了谁，那自是开心极了。\n言归正传 已经初步了解过了Go，说来和Delphi还是有不少相似之处呢，从Delphi转向Go应该会比较轻松吧。\n工程结构 Delphi的工程算是比较自由的，源码的话，只要把单元路径引了或是直接包含进工程单元里就可以了，编译出的dcu和最终的exe指定下路径也就没问题了，通常我都使用下面这种结构：\n1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ src/ dcu/ mod1/ *.dfm *.pas mod2/ *.dfm *.pas *.dpr 不过，每一个工程都要设置，而且我习惯将Debug和Release设置完全一样，也还真是够烦的。\nGo就没得选了，只有一种结构：\n1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ pkg/ src/ *.go mod1/ *.go *_test.go mod2/ *.go *_test.go 整体和我原有的习惯差不多，还是蛮容易接受的，不过倒是要把这Project的路径加入到GOPATH系统变量里让人有一点小不爽。但是Go可以直接把测试都写了，这点还是蛮让我惊喜的，毕竟用了这么多年Delphi也没写过一行像样的测试。\n源码结构 Delphi典型的源码结构是这样：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 unit Unit1; interface uses .",
  "keywords": [
    "go", "delphi", "pascal"
  ],
  "articleBody": " 从其它平台迁移而来\n废话 长期从事Delphi开发，虽不敢说精通，但说很熟悉还是相当有自信的。不过，只会一门语言，而且还是这么老的语言，更是在大天朝很小众的语言，总感觉自己离饿死街头没多远了，所以趁着还没老再学个潮点的吧。\n先前考虑过Python，初步了解后觉得不太适合自己：\n解释型语言：部署时得先搞个运行环境，发布的程序就是源码本身，再加上这个执行效率，怎么想都还是编译型语言更合适。\n动态语言：无需声明，拿来就用，这已经很不合习惯了。想想一个变量，前一秒还是浮点数，下一秒就成字符串了，再一眨眼又成某个对象了……虽然一般不会有人这么写，但是挡不住手误啊，还是把这种小细节交给编译器更让人放心。\n所以，对于有点强迫症和洁癖的自己，最后还是选了Go，比较符合已有的编程习惯，学习成本应该相对会低些吧。\n至于Go嘛，想学是已经很久了，但由于种种原因却迟迟未开启，不过终究还是要迈出这一步的，所以就搞这么个系列来记录吧，一方面算是自我督促，另一方面也算是一种交流吧，当然，若一不留神帮上了谁，那自是开心极了。\n言归正传 已经初步了解过了Go，说来和Delphi还是有不少相似之处呢，从Delphi转向Go应该会比较轻松吧。\n工程结构 Delphi的工程算是比较自由的，源码的话，只要把单元路径引了或是直接包含进工程单元里就可以了，编译出的dcu和最终的exe指定下路径也就没问题了，通常我都使用下面这种结构：\n1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ src/ dcu/ mod1/ *.dfm *.pas mod2/ *.dfm *.pas *.dpr 不过，每一个工程都要设置，而且我习惯将Debug和Release设置完全一样，也还真是够烦的。\nGo就没得选了，只有一种结构：\n1 2 3 4 5 6 7 8 9 10 11 Project/ bin/ pkg/ src/ *.go mod1/ *.go *_test.go mod2/ *.go *_test.go 整体和我原有的习惯差不多，还是蛮容易接受的，不过倒是要把这Project的路径加入到GOPATH系统变量里让人有一点小不爽。但是Go可以直接把测试都写了，这点还是蛮让我惊喜的，毕竟用了这么多年Delphi也没写过一行像样的测试。\n源码结构 Delphi典型的源码结构是这样：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 unit Unit1; interface uses ...//单元引用 type ...//公开类型定义 const ...//公开常量 var ...//公开变量 procedure Proc1;//公开过程声明 function Func1: Integer;//公开函数声明 implementation uses ...//私有单元引用 const ...//私有单元级常量 var ...//私有单元级变量 procedure Proc1; var ...//模块级变量 begin ...//公开过程实现 end; function Func1: Integer; const ...//模块级常量 begin ...//公开函数实现 end; procedure Proc2;//单元级私有过程实现 function Func2: Integer;//模块级私有函数实现 begin ... end; begin ... end; initialization ...//单元初始化代码 finalization ...//单元反初始化代码 end. Go的源码结构是这样：\n1 2 3 4 5 6 7 8 package pkg1 import \"fmt\" //导入包 const C1 //公开常量 const c2 //私有常量 var V1 //公开变量 var v2 //私有变量 func Func1(){}//公开方法 func func2(){}//私有方法 整体上来看，Delphi语意更明确，Go则更简洁，Delphi更集中，Go则和所有类c语言一样比较单一、灵活，各有各的好。倒是Go这用首字母大小写来区分公开私有让我这喜欢pascal命名法的有点尴尬。\n注释 Delphi\n1 2 3 4 5 6 7 8 9 10 //这是单行注释 { 这是多行注释第一行 这是多行注释第二行 } (* 这是另外一种多行注释 与{}可以互相包含 主要用于注释内容中有 } 的情况 *) Go\n1 2 3 4 5 //这是单行注释 /* 这是多行注释第一行 这是多行注释第二行 */ 文档 Delphi安装CnPack之后，可以使用xml风格的注释，写在方法前可以成为方法的文档说明。\nGo提供的godoc也可以从代码中提取顶级声明的首行注释以及每个对象的相关注释生成相关文档。\n运算符 Delphi\n赋值运算符：:= 算术运算符：+、-、*、/、div、mod 逻辑运算符：not、and、or、xor 位运算符：not、and、or、xor、shl、shr 关系运算符：=、\u003c\u003e、\u003e、\u003c、\u003e=、\u003c= 指针运算符：^、+、-、=、\u003c\u003e 地址运算符：@ 字符串连接符：+ 集合运算符：+、-、*、\u003c=、\u003e=、=、=、\u003c\u003e、in 类运算符：as、is、=、\u003c\u003e Go\n赋值运算符：=、:=、+=、-=、*=、/=、%=、\u003c\u003c=、\u003e\u003e=、\u0026=、|=、^= 算术运算符：+、-、*、/、%、++、-- 逻辑运算符：!、\u0026\u0026、|| 位运算符：\u003c\u003c、\u003e\u003e、\u0026、|、^ 关系运算符：==、!=、\u003e、\u003c、\u003e=、\u003c= 指针运算符：* 地址运算符：\u0026 字符串连接符：+ 基本数据类型 Delphi\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 //整型 ShortInt 1B -128~127 Byte 1B 0~255 SmallInt 2B -32768~32767 Word 2B 0~65535 LongInt 4B -2147483648~2147483647 LongWord 4B 0~4294967295 Int64 8B -9223372036854775808~9223372036854775807 UInt64 8B 0~18446744073709551615 Integer 4B -2147483648~2147483647 Cardinal 4B 0~4294967295 //浮点型 Single 4B Real48 6B //从未用过 Double 8B Real 8B Currency 8B //金融专用 //布尔型 Boolean 1B ByteBool 1B WordBool 2B LongBool 4B //字符型 AnsiChar 1B //ANSI编码 WideChar 2B //Unicode编码 Char //早期版本相当于AnsiChar，后期WideChar //字符串 ShortString //兼容老旧版本 AnsiString //ANSI编码 WideString //Unicode编码 String //早期版本相当于AnsiString，后期WideString //指针 Pointer //变体类型 Variant Go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 //整型 int8 1B -128~127 uint8 1B 0~255 int16 2B -32768~32767 uint16 2B 0~65535 int32 4B -2147483648~2147483647 uint32 4B 0~4294967295 int64 8B -9223372036854775808~9223372036854775807 uint64 8B 0~18446744073709551615 int //有符号，与平台相关 uint //无符号，与平台相关 //浮点型 float32 4B float64 8B //布尔型 bool //字符型 byte //uint8的别名，通常用于表明原始数据 rune //等价于int32，通常用于表示一个UTF-8字符 //字符串 string //UTF-8编码 //指针 uintptr //复数 complex64 complex128 //map类型 map[键类型] 值类型 //接口类型 interface{} //错误类型 error 整体上看，两者数据类型基本一致，不过Go直接支持了map和复数类型。另外，Go也没有变体类型，不过可以用接口类型interface{}来实现传任意类型。需要注意的是，Go的字符串是UTF-8编码而不是Unicode编码。\n数据类型转换 Delphi在数据类型兼容时可直接进行隐式转换，也可进行显式（强制）转换，语法为：类型B的值 := 类型B(类型A的值)；Go不存在隐式转换，需要转换时只能使用显式（强制）转换，语法为：类型B的值 = 类型B(类型A的值)。\n变量 Delphi\n1 2 3 4 5 6 7 8 9 //声明变量 var v1 : string; v2, v3 : Integer; //声明并初始化 var v4 : Double = 3.14; //变量赋值 v1 := 'abc'; Go\n1 2 3 4 5 6 7 8 9 10 11 12 13 //声明变量 var ( v1 string v2, v3 int ) //声明并初始化 var v4 float64 = 3.14 var v5 = 1234 //在函数内还可以这样 v6 := 2468 //变量赋值 v1 = 'abc' v2, v3 = v3, v2 变量声明都用了关键字var，且都是变量在前，类型在后，也都支持批量声明，声明并初始化的语法也基本一致，赋值也几乎一致。\n不过Go还多了一些特性：\n支持类型推导，声明并初始化时可省略类型。\n在函数内部声明并初始化变量时还支持用:=的方式简写（不过这和Delphi的赋值符号一样，意义却大相径庭，使用时得留意了）。\n函数内部的变量可以像c++一样达到语块级的作用域和生命期。\n支持多重赋值，交换变量更简洁。\n支持匿名变量，即用_来占位。\n常量 Delphi\n1 2 3 4 const c1: string = 'abc'; c2 = '123'; c3 = 456; Go\n1 2 3 4 5 6 7 const ( c1 string = \"abc\" c2 = \"123\" c3 = 456 c4 //与c3一样 c5, c6 = 1.2, true ) 都用了关键字const，都支持批量声明，也都支持类型推导，而且Go的类型推导更智能些，换句话说就叫更复杂些（主要是因为与别的混在一起了）。\n枚举 Delphi\n1 2 3 4 5 6 7 8 type myEnum=( eA, //0 eB, //1 eC = 10, //10 eD, //11 eE, //12 eF //13 ); Go\n1 2 3 4 5 6 7 8 const( eA = iota //0 eB //1 eC = 10 //10 eD //10 eE = iota //4 eF //5 ) Delphi使用关键字type来声明一个枚举类型，而且还需要命名，默认以0开始递增，也可以为某一元素指定值，其后元素依次递增。\nGo没有枚举的关键字，但使用const和iota也可以达到目的。iota每次遇到const就重置为0，每增加一个元素就自增1，无论元素有没有取iota的值。\n不过，一般情况下很少会为枚举的元素指定特定值。\n类型和别名 Delphi\n1 2 3 4 //定义类型 type myInt = type Integer; //类型别名 type myInt = Integer; Go\n1 2 3 4 //定义类型 type myInt int //类型别名 type myInt = int 数组 Delphi\n1 2 3 4 5 6 7 8 //静态数组 var r1 : array[0..9] of Byte; var r2 : array[0..1] of Boolean = (True, False); var r3 : array[0..3,0..1] of Integer; //二维静态数组 var r4 : array[0..3] of array[0..1] of Integer; //同上 //动态数组 var r5 : array of Integer; //一维动态数组 var r6 : array of array of Integer; //二维动态数组 Go\n1 2 3 4 5 6 7 //静态数组 var r1 [10]byte var r2 [2]bool{true,false} var r3, r4 [4][2]int //用切片来代替动态数组 var r5 []int var r6 [][]int Go没有专门的动态数组，不过有更为灵活、实用的切片，用切片完全可以实现动态数组的功能。\n结构体 Delphi\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 //定义 type TEmp = record Name : string; Age : Integer; end; PEmp = ^TEmp; var emp : TEmp; p : PEmp; //赋值 p := @emp; emp.Name := 'Sam'; //p^.Name := 'Sam'; emp.Age := 10; //p^.Age := 10; //还有一种带packed的结构体，由于不会进行内存对齐而速度略慢，但用于dll时可避免内存混乱 type TRcd = packed record B : Byte; C : Integer; end; Go\n1 2 3 4 5 6 7 8 9 10 11 12 type TEmp struct { Name string Age int } var( emp TEmp p *TEmp ) p = *emp emp.Name = \"Sam\" //(*p).Name = \"Sam\" //p.Name = \"Sam\" emp.Age = 10 //(*p).Age = 10 //p.Age = 10 分支 Delphi\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 //if if 布尔表达式 then ...; //if ... else ... if 布尔表达式 then ... else ...; //if ... else if ... if 条件表达式1 then ... else if 布尔表达式2 then ... else ...; //case语句 case 选项表达式 of 值1: ...; 值2: ...; else ...; end; Go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 //if if 布尔表达式 { ... } //if ... else ... if 布尔表达式 { ... } else { ... } //if ... else if ... if 布尔表达式1 { ... } else if 布尔表达式2 { ... } else { ... } //switch switch 选项表达式 { case 值1: ... fallthrough //兼容C语言的case，强制执行下一个case case 值2: ... default: ... } switch{ case 选项表达式 == 值1: ... case 选项表达式 == 值2: ... default: ... } switch 类型表达式 { case 类型1: ... case 类型2: ... default: ... } 循环 Delphi\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 //升幂记数循环 for 记数变量 := 起始值 to 终点值 do //起始值\u003c终点值，变量每循环变化1 语句; //降幂记数循环 for 记数变量 := 起始值 downto 终点值 do //起始值\u003e终点值，变量每循环变化1 语句; //高版本支持，2009+？ for 循环变量 in 集合 do 语句; //当型循环，当表达式值为真时执行循环 while 布尔表达式 do 语句; //直到型循环，当表达式值为真时退出循环 repeat 语句; until 布尔表达式; Go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 //类C的for循环 for 循环变量初始化; 条件表达式; 循环变量改变 { ... } //类C的while循环 for 条件表达式 { ... } //无限循环 for{ ... } //类C的for each for k, v := range R {//R可为数组、切片、map、字符串等 ... } 控制语句 goto 都用来直接跳转到指定标签处继续向下执行。Delphi需要先使用label声明标签，Go则直接使用标签，标签的语法均为：\n1 2 labelA: ... continue 都用来结束本次循环并进入下一次循环。在多层循环中，Go还可以在其后跟标签，用来结束标签对应的那层循环并进入下一次循环。\nbreak 都用来结束当前循环并执行当前循环之后的代码。在多层循环中，Go还可以在其后跟标签，用来结束标签对应的那层循环并执行循环之后的代码。\n函数 Delphi\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 //过程，无返回值 procedure Proc1; begin ... end; procedure Proc2(i1, i2: Integer; s1, s2: string); begin ... Proc1; end; //函数，有返回值 function Func1: string; begin ... Result := '返回值'; Proc2(1, 2, 'abc', 'def'); end; function Func2(i1, i2: Integer; s1, s2: string): string; begin ... Result := Func1(); end; Go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 //无返回值 func f1() { ... } func f2(i1, i2 int, s1, s2 string) { ... f1() } //有返回值 func f3() string { r := \"返回值\" return r //必须带 r } func f4() (s string) { s = f3() return s //可省略 s } func f5() (r1 int, r2 string) { r1, r2 = f6(1, 2, 'abc', 'def') return r1, r2 //可省略 r1, r2，若不省略，则顺序必须一致 } func f6(i1, i2 int, s1, s2 string) (r1 int, r2 string) { r1 = i1 + i2 r2 = s1 + s2 return } Delphi无返回值的用procedure，有返回值的用function；Go统一用func。\n都接受0个或多个参数，Delphi同类型参数间用,分隔，不同类型参数间用;分隔；Go统一用,分隔。\nDelphi函数只能有1个返回值，且返回值固定由Result隐藏变量携带，Result可多次赋值，之后也可有其它语句；Go可以有0个或多个返回值，返回值变量可以声明也可以不声明，但必须由return返回且必须为最后一条语句，若返回值变量有多个且已声明，return后跟的返回值变量顺序必须与定义一致。\nDelphi无参过程/函数调用时，括号()可带可不带；Go无参函数调用时必须带()。\nDelphi被调用的过程/函数必须在主调过程/函数之前实现或在interface区已声明；Go函数没有声明只有实现，且不要求被调函数在主调函数之前定义。\n以下概念比较庞杂，三言两语难以说清楚，暂且告一段落\n错误处理 接口 面向对象 并发 ",
  "wordCount" : "1388",
  "inLanguage": "zh",
  "datePublished": "2019-09-09T23:30:04+08:00",
  "dateModified": "2019-09-09T23:30:04+08:00",
  "author":{
    "@type": "Person",
    "name": "慢步道人"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://afrusrsc.github.io/posts/program/go/go_delphi_base/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "慢步道人",
    "logo": {
      "@type": "ImageObject",
      "url": "https://afrusrsc.github.io/img/icon.jpg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script async src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://afrusrsc.github.io/" accesskey="h" title="慢步道人 (Alt + H)">
                <img src="https://afrusrsc.github.io/img/icon.jpg" alt="" aria-label="logo"
                    height="30">慢步道人</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://afrusrsc.github.io/search/" title="🔍搜索">
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/posts/" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/archives/" title="📅时间轴">
                    <span>📅时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/tags/" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/about/" title="👨🏻‍💻关于">
                    <span>👨🏻‍💻关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://afrusrsc.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://afrusrsc.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://afrusrsc.github.io/posts/program/">💻编程开发</a>&nbsp;»&nbsp;<a href="https://afrusrsc.github.io/posts/program/go/">⚔️golang</a></div>
    <h1 class="post-title entry-hint-parent">
      从Delphi到Go——基础
    </h1>
    <div class="post-meta"><span title='2019-09-09 23:30:04 +0800 CST'>2019-09-09 23:30:04</span>&nbsp;·&nbsp;7 分钟&nbsp;·&nbsp;慢步道人

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e5%ba%9f%e8%af%9d" aria-label="废话">废话</a></li>
                    <li>
                        <a href="#%e8%a8%80%e5%bd%92%e6%ad%a3%e4%bc%a0" aria-label="言归正传">言归正传</a><ul>
                            
                    <li>
                        <a href="#%e5%b7%a5%e7%a8%8b%e7%bb%93%e6%9e%84" aria-label="工程结构">工程结构</a></li>
                    <li>
                        <a href="#%e6%ba%90%e7%a0%81%e7%bb%93%e6%9e%84" aria-label="源码结构">源码结构</a></li>
                    <li>
                        <a href="#%e6%b3%a8%e9%87%8a" aria-label="注释">注释</a><ul>
                            
                    <li>
                        <a href="#%e6%96%87%e6%a1%a3" aria-label="文档">文档</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%bf%90%e7%ae%97%e7%ac%a6" aria-label="运算符">运算符</a></li>
                    <li>
                        <a href="#%e5%9f%ba%e6%9c%ac%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b" aria-label="基本数据类型">基本数据类型</a><ul>
                            
                    <li>
                        <a href="#%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2" aria-label="数据类型转换">数据类型转换</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%8f%98%e9%87%8f" aria-label="变量">变量</a></li>
                    <li>
                        <a href="#%e5%b8%b8%e9%87%8f" aria-label="常量">常量</a></li>
                    <li>
                        <a href="#%e6%9e%9a%e4%b8%be" aria-label="枚举">枚举</a></li>
                    <li>
                        <a href="#%e7%b1%bb%e5%9e%8b%e5%92%8c%e5%88%ab%e5%90%8d" aria-label="类型和别名">类型和别名</a></li>
                    <li>
                        <a href="#%e6%95%b0%e7%bb%84" aria-label="数组">数组</a></li>
                    <li>
                        <a href="#%e7%bb%93%e6%9e%84%e4%bd%93" aria-label="结构体">结构体</a></li>
                    <li>
                        <a href="#%e5%88%86%e6%94%af" aria-label="分支">分支</a></li>
                    <li>
                        <a href="#%e5%be%aa%e7%8e%af" aria-label="循环">循环</a></li>
                    <li>
                        <a href="#%e6%8e%a7%e5%88%b6%e8%af%ad%e5%8f%a5" aria-label="控制语句">控制语句</a><ul>
                            
                    <li>
                        <a href="#goto" aria-label="goto">goto</a></li>
                    <li>
                        <a href="#continue" aria-label="continue">continue</a></li>
                    <li>
                        <a href="#break" aria-label="break">break</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%87%bd%e6%95%b0" aria-label="函数">函数</a></li>
                    <li>
                        <a href="#%e9%94%99%e8%af%af%e5%a4%84%e7%90%86" aria-label="错误处理">错误处理</a></li>
                    <li>
                        <a href="#%e6%8e%a5%e5%8f%a3" aria-label="接口">接口</a></li>
                    <li>
                        <a href="#%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1" aria-label="面向对象">面向对象</a></li>
                    <li>
                        <a href="#%e5%b9%b6%e5%8f%91" aria-label="并发">并发</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><blockquote>
<p><strong>从其它平台迁移而来</strong></p>
</blockquote>
<hr>
<h1 id="废话">废话<a hidden class="anchor" aria-hidden="true" href="#废话">#</a></h1>
<p>长期从事<code>Delphi</code>开发，虽不敢说<em>精通</em>，但说<em>很熟悉</em>还是相当有自信的。不过，只会一门语言，而且还是这么老的语言，更是在大天朝很小众的语言，总感觉自己离饿死街头没多远了，所以趁着还没老再学个潮点的吧。</p>
<p>先前考虑过<code>Python</code>，初步了解后觉得不太适合自己：</p>
<ol>
<li>
<p>解释型语言：部署时得先搞个运行环境，发布的程序就是源码本身，再加上这个执行效率，怎么想都还是编译型语言更合适。</p>
</li>
<li>
<p>动态语言：无需声明，拿来就用，这已经很不合习惯了。想想一个变量，前一秒还是浮点数，下一秒就成字符串了，再一眨眼又成某个对象了……虽然一般不会有人这么写，但是挡不住手误啊，还是把这种小细节交给编译器更让人放心。</p>
</li>
</ol>
<p>所以，对于有点<strong>强迫症</strong>和<strong>洁癖</strong>的自己，最后还是选了<code>Go</code>，比较符合已有的编程习惯，学习成本应该相对会低些吧。</p>
<p>至于<code>Go</code>嘛，想学是已经很久了，但由于种种原因却迟迟未开启，不过终究还是要迈出这一步的，所以就搞这么个系列来记录吧，一方面算是自我督促，另一方面也算是一种交流吧，当然，若一不留神帮上了谁，那自是开心极了。</p>
<h1 id="言归正传">言归正传<a hidden class="anchor" aria-hidden="true" href="#言归正传">#</a></h1>
<p>已经初步了解过了<code>Go</code>，说来和<code>Delphi</code>还是有不少相似之处呢，从<code>Delphi</code>转向<code>Go</code>应该会比较轻松吧。</p>
<h2 id="工程结构">工程结构<a hidden class="anchor" aria-hidden="true" href="#工程结构">#</a></h2>
<p><code>Delphi</code>的工程算是比较自由的，源码的话，只要把单元路径引了或是直接包含进工程单元里就可以了，编译出的<code>dcu</code>和最终的<code>exe</code>指定下路径也就没问题了，通常我都使用下面这种结构：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Project/
</span></span><span class="line"><span class="cl">  bin/
</span></span><span class="line"><span class="cl">  src/
</span></span><span class="line"><span class="cl">    dcu/
</span></span><span class="line"><span class="cl">    mod1/
</span></span><span class="line"><span class="cl">      *.dfm
</span></span><span class="line"><span class="cl">      *.pas
</span></span><span class="line"><span class="cl">    mod2/
</span></span><span class="line"><span class="cl">      *.dfm
</span></span><span class="line"><span class="cl">      *.pas
</span></span><span class="line"><span class="cl">    *.dpr
</span></span></code></pre></td></tr></table>
</div>
</div><p>不过，每一个工程都要设置，而且我习惯将<code>Debug</code>和<code>Release</code>设置完全一样，也还真是够烦的。</p>
<p><code>Go</code>就没得选了，只有一种结构：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Project/
</span></span><span class="line"><span class="cl">  bin/
</span></span><span class="line"><span class="cl">  pkg/
</span></span><span class="line"><span class="cl">  src/
</span></span><span class="line"><span class="cl">    *.go
</span></span><span class="line"><span class="cl">    mod1/
</span></span><span class="line"><span class="cl">      *.go
</span></span><span class="line"><span class="cl">      *_test.go
</span></span><span class="line"><span class="cl">    mod2/
</span></span><span class="line"><span class="cl">      *.go
</span></span><span class="line"><span class="cl">      *_test.go
</span></span></code></pre></td></tr></table>
</div>
</div><p>整体和我原有的习惯差不多，还是蛮容易接受的，不过倒是要把这<code>Project</code>的路径加入到<code>GOPATH</code>系统变量里让人有一点小不爽。但是<code>Go</code>可以直接把测试都写了，这点还是蛮让我惊喜的，毕竟用了这么多年<code>Delphi</code>也没写过一行像样的测试。</p>
<h2 id="源码结构">源码结构<a hidden class="anchor" aria-hidden="true" href="#源码结构">#</a></h2>
<p><code>Delphi</code>典型的源码结构是这样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">unit</span> <span class="n">Unit1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">interface</span>
</span></span><span class="line"><span class="cl"><span class="n">uses</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">单元引用</span>
</span></span><span class="line"><span class="cl"><span class="n">type</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">公开类型定义</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">公开常量</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">公开变量</span>
</span></span><span class="line"><span class="cl"><span class="n">procedure</span> <span class="n">Proc1</span><span class="p">;</span><span class="o">//</span><span class="err">公开过程声明</span>
</span></span><span class="line"><span class="cl"><span class="n">function</span> <span class="n">Func1</span><span class="p">:</span> <span class="n">Integer</span><span class="p">;</span><span class="o">//</span><span class="err">公开函数声明</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">implementation</span>
</span></span><span class="line"><span class="cl"><span class="n">uses</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">私有单元引用</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">私有单元级常量</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">私有单元级变量</span>
</span></span><span class="line"><span class="cl"><span class="n">procedure</span> <span class="n">Proc1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">模块级变量</span>
</span></span><span class="line"><span class="cl"><span class="n">begin</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">公开过程实现</span>
</span></span><span class="line"><span class="cl"><span class="n">end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">function</span> <span class="n">Func1</span><span class="p">:</span> <span class="n">Integer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">模块级常量</span>
</span></span><span class="line"><span class="cl"><span class="n">begin</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">公开函数实现</span>
</span></span><span class="line"><span class="cl"><span class="n">end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">procedure</span> <span class="n">Proc2</span><span class="p">;</span><span class="o">//</span><span class="err">单元级私有过程实现</span>
</span></span><span class="line"><span class="cl">  <span class="n">function</span> <span class="n">Func2</span><span class="p">:</span> <span class="n">Integer</span><span class="p">;</span><span class="o">//</span><span class="err">模块级私有函数实现</span>
</span></span><span class="line"><span class="cl">  <span class="n">begin</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="n">end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">begin</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">initialization</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">单元初始化代码</span>
</span></span><span class="line"><span class="cl"><span class="n">finalization</span>
</span></span><span class="line"><span class="cl">  <span class="o">...//</span><span class="err">单元反初始化代码</span>
</span></span><span class="line"><span class="cl"><span class="n">end</span><span class="o">.</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Go</code>的源码结构是这样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">pkg1</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span> <span class="c1">//导入包
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="nx">C1</span> <span class="c1">//公开常量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="nx">c2</span> <span class="c1">//私有常量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">V1</span> <span class="c1">//公开变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">v2</span> <span class="c1">//私有变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">Func1</span><span class="p">(){}</span><span class="c1">//公开方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">func2</span><span class="p">(){}</span><span class="c1">//私有方法
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>整体上来看，<code>Delphi</code>语意更明确，<code>Go</code>则更简洁，<code>Delphi</code>更集中，<code>Go</code>则和所有<code>类c语言</code>一样比较单一、灵活，各有各的好。倒是<code>Go</code>这用首字母大小写来区分公开私有让我这喜欢<code>pascal命名法</code>的有点尴尬。</p>
<h2 id="注释">注释<a hidden class="anchor" aria-hidden="true" href="#注释">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//这是单行注释
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">这是多行注释第一行
</span></span><span class="line"><span class="cl">这是多行注释第二行
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">(*
</span></span><span class="line"><span class="cl">这是另外一种多行注释
</span></span><span class="line"><span class="cl">与{}可以互相包含
</span></span><span class="line"><span class="cl">主要用于注释内容中有 } 的情况
</span></span><span class="line"><span class="cl">*)
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//这是单行注释
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">这是多行注释第一行
</span></span></span><span class="line"><span class="cl"><span class="cm">这是多行注释第二行
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="文档">文档<a hidden class="anchor" aria-hidden="true" href="#文档">#</a></h3>
<p><code>Delphi</code>安装<code>CnPack</code>之后，可以使用<code>xml风格</code>的注释，写在方法前可以成为方法的文档说明。</p>
<p><code>Go</code>提供的<code>godoc</code>也可以从代码中提取顶级声明的首行注释以及每个对象的相关注释生成相关文档。</p>
<h2 id="运算符">运算符<a hidden class="anchor" aria-hidden="true" href="#运算符">#</a></h2>
<p>Delphi</p>
<ul>
<li>赋值运算符：<code>:=</code></li>
<li>算术运算符：<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>div</code>、<code>mod</code></li>
<li>逻辑运算符：<code>not</code>、<code>and</code>、<code>or</code>、<code>xor</code></li>
<li>位运算符：<code>not</code>、<code>and</code>、<code>or</code>、<code>xor</code>、<code>shl</code>、<code>shr</code></li>
<li>关系运算符：<code>=</code>、<code>&lt;&gt;</code>、<code>&gt;</code>、<code>&lt;</code>、<code>&gt;=</code>、<code>&lt;=</code></li>
<li>指针运算符：<code>^</code>、<code>+</code>、<code>-</code>、<code>=</code>、<code>&lt;&gt;</code></li>
<li>地址运算符：<code>@</code></li>
<li>字符串连接符：<code>+</code></li>
<li>集合运算符：<code>+</code>、<code>-</code>、<code>*</code>、<code>&lt;=</code>、<code>&gt;=</code>、<code>=</code>、<code>=</code>、<code>&lt;&gt;</code>、<code>in</code></li>
<li>类运算符：<code>as</code>、<code>is</code>、<code>=</code>、<code>&lt;&gt;</code></li>
</ul>
<p>Go</p>
<ul>
<li>赋值运算符：<code>=</code>、<code>:=</code>、<code>+=</code>、<code>-=</code>、<code>*=</code>、<code>/=</code>、<code>%=</code>、<code>&lt;&lt;=</code>、<code>&gt;&gt;=</code>、<code>&amp;=</code>、<code>|=</code>、<code>^=</code></li>
<li>算术运算符：<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code>、<code>++</code>、<code>--</code></li>
<li>逻辑运算符：<code>!</code>、<code>&amp;&amp;</code>、<code>||</code></li>
<li>位运算符：<code>&lt;&lt;</code>、<code>&gt;&gt;</code>、<code>&amp;</code>、<code>|</code>、<code>^</code></li>
<li>关系运算符：<code>==</code>、<code>!=</code>、<code>&gt;</code>、<code>&lt;</code>、<code>&gt;=</code>、<code>&lt;=</code></li>
<li>指针运算符：<code>*</code></li>
<li>地址运算符：<code>&amp;</code></li>
<li>字符串连接符：<code>+</code></li>
</ul>
<h2 id="基本数据类型">基本数据类型<a hidden class="anchor" aria-hidden="true" href="#基本数据类型">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//整型
</span></span><span class="line"><span class="cl">ShortInt  1B  -128~127
</span></span><span class="line"><span class="cl">Byte      1B  0~255
</span></span><span class="line"><span class="cl">SmallInt  2B  -32768~32767
</span></span><span class="line"><span class="cl">Word      2B  0~65535
</span></span><span class="line"><span class="cl">LongInt   4B  -2147483648~2147483647
</span></span><span class="line"><span class="cl">LongWord  4B  0~4294967295
</span></span><span class="line"><span class="cl">Int64     8B  -9223372036854775808~9223372036854775807
</span></span><span class="line"><span class="cl">UInt64    8B  0~18446744073709551615
</span></span><span class="line"><span class="cl">Integer   4B  -2147483648~2147483647
</span></span><span class="line"><span class="cl">Cardinal  4B  0~4294967295
</span></span><span class="line"><span class="cl">//浮点型
</span></span><span class="line"><span class="cl">Single    4B
</span></span><span class="line"><span class="cl">Real48    6B  //从未用过
</span></span><span class="line"><span class="cl">Double    8B
</span></span><span class="line"><span class="cl">Real      8B
</span></span><span class="line"><span class="cl">Currency  8B  //金融专用
</span></span><span class="line"><span class="cl">//布尔型
</span></span><span class="line"><span class="cl">Boolean   1B
</span></span><span class="line"><span class="cl">ByteBool  1B
</span></span><span class="line"><span class="cl">WordBool  2B
</span></span><span class="line"><span class="cl">LongBool  4B
</span></span><span class="line"><span class="cl">//字符型
</span></span><span class="line"><span class="cl">AnsiChar  1B  //ANSI编码
</span></span><span class="line"><span class="cl">WideChar  2B  //Unicode编码
</span></span><span class="line"><span class="cl">Char          //早期版本相当于AnsiChar，后期WideChar
</span></span><span class="line"><span class="cl">//字符串
</span></span><span class="line"><span class="cl">ShortString   //兼容老旧版本
</span></span><span class="line"><span class="cl">AnsiString    //ANSI编码
</span></span><span class="line"><span class="cl">WideString    //Unicode编码
</span></span><span class="line"><span class="cl">String        //早期版本相当于AnsiString，后期WideString
</span></span><span class="line"><span class="cl">//指针
</span></span><span class="line"><span class="cl">Pointer
</span></span><span class="line"><span class="cl">//变体类型
</span></span><span class="line"><span class="cl">Variant
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//整型
</span></span><span class="line"><span class="cl">int8      1B  -128~127
</span></span><span class="line"><span class="cl">uint8     1B  0~255
</span></span><span class="line"><span class="cl">int16     2B  -32768~32767
</span></span><span class="line"><span class="cl">uint16    2B  0~65535
</span></span><span class="line"><span class="cl">int32     4B  -2147483648~2147483647
</span></span><span class="line"><span class="cl">uint32    4B  0~4294967295
</span></span><span class="line"><span class="cl">int64     8B  -9223372036854775808~9223372036854775807
</span></span><span class="line"><span class="cl">uint64    8B  0~18446744073709551615
</span></span><span class="line"><span class="cl">int       //有符号，与平台相关
</span></span><span class="line"><span class="cl">uint      //无符号，与平台相关
</span></span><span class="line"><span class="cl">//浮点型
</span></span><span class="line"><span class="cl">float32   4B
</span></span><span class="line"><span class="cl">float64   8B
</span></span><span class="line"><span class="cl">//布尔型
</span></span><span class="line"><span class="cl">bool
</span></span><span class="line"><span class="cl">//字符型
</span></span><span class="line"><span class="cl">byte      //uint8的别名，通常用于表明原始数据
</span></span><span class="line"><span class="cl">rune      //等价于int32，通常用于表示一个UTF-8字符
</span></span><span class="line"><span class="cl">//字符串
</span></span><span class="line"><span class="cl">string    //UTF-8编码
</span></span><span class="line"><span class="cl">//指针
</span></span><span class="line"><span class="cl">uintptr
</span></span><span class="line"><span class="cl">//复数
</span></span><span class="line"><span class="cl">complex64
</span></span><span class="line"><span class="cl">complex128
</span></span><span class="line"><span class="cl">//map类型
</span></span><span class="line"><span class="cl">map[键类型] 值类型
</span></span><span class="line"><span class="cl">//接口类型
</span></span><span class="line"><span class="cl">interface{}
</span></span><span class="line"><span class="cl">//错误类型
</span></span><span class="line"><span class="cl">error
</span></span></code></pre></td></tr></table>
</div>
</div><p>整体上看，两者数据类型基本一致，不过<code>Go</code>直接支持了map和复数类型。另外，<code>Go</code>也没有变体类型，不过可以用接口类型<code>interface{}</code>来实现传任意类型。需要注意的是，<code>Go</code>的字符串是<code>UTF-8</code>编码而不是<code>Unicode</code>编码。</p>
<h3 id="数据类型转换">数据类型转换<a hidden class="anchor" aria-hidden="true" href="#数据类型转换">#</a></h3>
<p><code>Delphi</code>在数据类型兼容时可直接进行隐式转换，也可进行显式（强制）转换，语法为：<code>类型B的值 := 类型B(类型A的值)</code>；<code>Go</code>不存在隐式转换，需要转换时只能使用显式（强制）转换，语法为：<code>类型B的值 = 类型B(类型A的值)</code>。</p>
<h2 id="变量">变量<a hidden class="anchor" aria-hidden="true" href="#变量">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">//</span><span class="err">声明变量</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span>
</span></span><span class="line"><span class="cl">  <span class="n">v1</span> <span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="p">:</span> <span class="n">Integer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">//</span><span class="err">声明并初始化</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span>
</span></span><span class="line"><span class="cl">  <span class="n">v4</span> <span class="p">:</span> <span class="n">Double</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">//</span><span class="err">变量赋值</span>
</span></span><span class="line"><span class="cl"><span class="n">v1</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;abc&#39;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//声明变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">v1</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">v2</span><span class="p">,</span> <span class="nx">v3</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//声明并初始化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">v4</span> <span class="kt">float64</span> <span class="p">=</span> <span class="mf">3.14</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">v5</span> <span class="p">=</span> <span class="mi">1234</span>
</span></span><span class="line"><span class="cl"><span class="c1">//在函数内还可以这样
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">v6</span> <span class="o">:=</span> <span class="mi">2468</span>
</span></span><span class="line"><span class="cl"><span class="c1">//变量赋值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">v1</span> <span class="p">=</span> <span class="err">&#39;</span><span class="nx">abc</span><span class="err">&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nx">v2</span><span class="p">,</span> <span class="nx">v3</span> <span class="p">=</span> <span class="nx">v3</span><span class="p">,</span> <span class="nx">v2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>变量声明都用了关键字<code>var</code>，且都是变量在前，类型在后，也都支持批量声明，声明并初始化的语法也基本一致，赋值也几乎一致。</p>
<p>不过<code>Go</code>还多了一些特性：</p>
<ol>
<li>
<p>支持类型推导，声明并初始化时可省略类型。</p>
</li>
<li>
<p>在函数内部声明并初始化变量时还支持用<code>:=</code>的方式简写（不过这和<code>Delphi</code>的赋值符号一样，意义却大相径庭，使用时得留意了）。</p>
</li>
<li>
<p>函数内部的变量可以像<code>c++</code>一样达到语块级的作用域和生命期。</p>
</li>
<li>
<p>支持多重赋值，交换变量更简洁。</p>
</li>
<li>
<p>支持匿名变量，即用<code>_</code>来占位。</p>
</li>
</ol>
<h2 id="常量">常量<a hidden class="anchor" aria-hidden="true" href="#常量">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">const</span>
</span></span><span class="line"><span class="cl">  <span class="n">c1</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">c2</span>         <span class="o">=</span> <span class="s1">&#39;123&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">c3</span>         <span class="o">=</span> <span class="mi">456</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">c1</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;abc&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">c2</span>        <span class="p">=</span> <span class="s">&#34;123&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">c3</span>        <span class="p">=</span> <span class="mi">456</span>
</span></span><span class="line"><span class="cl">  <span class="nx">c4</span>        <span class="c1">//与c3一样
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">c5</span><span class="p">,</span> <span class="nx">c6</span>    <span class="p">=</span> <span class="mf">1.2</span><span class="p">,</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>都用了关键字<code>const</code>，都支持批量声明，也都支持类型推导，而且<code>Go</code>的类型推导更智能些，换句话说就叫更复杂些（主要是因为与别的混在一起了）。</p>
<h2 id="枚举">枚举<a hidden class="anchor" aria-hidden="true" href="#枚举">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">type myEnum=(
</span></span><span class="line"><span class="cl">  eA,      //0
</span></span><span class="line"><span class="cl">  eB,      //1
</span></span><span class="line"><span class="cl">  eC = 10, //10
</span></span><span class="line"><span class="cl">  eD,      //11
</span></span><span class="line"><span class="cl">  eE,      //12
</span></span><span class="line"><span class="cl">  eF       //13
</span></span><span class="line"><span class="cl">);
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">eA</span> <span class="p">=</span> <span class="kc">iota</span> <span class="c1">//0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">eB</span>        <span class="c1">//1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">eC</span> <span class="p">=</span> <span class="mi">10</span>   <span class="c1">//10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">eD</span>        <span class="c1">//10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">eE</span> <span class="p">=</span> <span class="kc">iota</span> <span class="c1">//4
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">eF</span>        <span class="c1">//5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Delphi</code>使用关键字<code>type</code>来声明一个枚举类型，而且还需要命名，默认以<code>0</code>开始递增，也可以为某一元素指定值，其后元素依次递增。</p>
<p><code>Go</code>没有枚举的关键字，但使用<code>const</code>和<code>iota</code>也可以达到目的。<code>iota</code>每次遇到<code>const</code>就重置为<code>0</code>，每增加一个元素就自增<code>1</code>，无论元素有没有取<code>iota</code>的值。</p>
<p>不过，一般情况下很少会为枚举的元素指定特定值。</p>
<h2 id="类型和别名">类型和别名<a hidden class="anchor" aria-hidden="true" href="#类型和别名">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//定义类型
</span></span><span class="line"><span class="cl">type myInt = type Integer;
</span></span><span class="line"><span class="cl">//类型别名
</span></span><span class="line"><span class="cl">type myInt = Integer;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//定义类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">myInt</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="c1">//类型别名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">myInt</span> <span class="p">=</span> <span class="kt">int</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="数组">数组<a hidden class="anchor" aria-hidden="true" href="#数组">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">//</span><span class="err">静态数组</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span> <span class="n">r1</span> <span class="p">:</span> <span class="n">array</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">9</span><span class="p">]</span> <span class="n">of</span> <span class="n">Byte</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span> <span class="n">r2</span> <span class="p">:</span> <span class="n">array</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="n">of</span> <span class="n">Boolean</span> <span class="o">=</span> <span class="p">(</span><span class="n">True</span><span class="p">,</span> <span class="n">False</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span> <span class="n">r3</span> <span class="p">:</span> <span class="n">array</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="n">of</span> <span class="n">Integer</span><span class="p">;</span>           <span class="o">//</span><span class="err">二维静态数组</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span> <span class="n">r4</span> <span class="p">:</span> <span class="n">array</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">3</span><span class="p">]</span> <span class="n">of</span> <span class="n">array</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="n">of</span> <span class="n">Integer</span><span class="p">;</span> <span class="o">//</span><span class="err">同上</span>
</span></span><span class="line"><span class="cl"><span class="o">//</span><span class="err">动态数组</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span> <span class="n">r5</span> <span class="p">:</span> <span class="n">array</span> <span class="n">of</span> <span class="n">Integer</span><span class="p">;</span>          <span class="o">//</span><span class="err">一维动态数组</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span> <span class="n">r6</span> <span class="p">:</span> <span class="n">array</span> <span class="n">of</span> <span class="n">array</span> <span class="n">of</span> <span class="n">Integer</span><span class="p">;</span> <span class="o">//</span><span class="err">二维动态数组</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//静态数组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">r1</span> <span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="kt">byte</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">r2</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">bool</span><span class="p">{</span><span class="kc">true</span><span class="p">,</span><span class="kc">false</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">r3</span><span class="p">,</span> <span class="nx">r4</span> <span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="c1">//用切片来代替动态数组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">r5</span> <span class="p">[]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">r6</span> <span class="p">[][]</span><span class="kt">int</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Go</code>没有专门的动态数组，不过有更为灵活、实用的切片，用切片完全可以实现动态数组的功能。</p>
<h2 id="结构体">结构体<a hidden class="anchor" aria-hidden="true" href="#结构体">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">//</span><span class="err">定义</span>
</span></span><span class="line"><span class="cl"><span class="n">type</span>
</span></span><span class="line"><span class="cl">  <span class="n">TEmp</span> <span class="o">=</span> <span class="n">record</span>
</span></span><span class="line"><span class="cl">    <span class="n">Name</span> <span class="p">:</span> <span class="n">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Age</span>  <span class="p">:</span> <span class="n">Integer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">PEmp</span> <span class="o">=</span> <span class="o">^</span><span class="n">TEmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">var</span>
</span></span><span class="line"><span class="cl">  <span class="n">emp</span> <span class="p">:</span> <span class="n">TEmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">p</span> <span class="p">:</span> <span class="n">PEmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">//</span><span class="err">赋值</span>
</span></span><span class="line"><span class="cl"><span class="n">p</span> <span class="p">:</span><span class="o">=</span> <span class="err">@</span><span class="n">emp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">emp</span><span class="o">.</span><span class="n">Name</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;Sam&#39;</span><span class="p">;</span>  <span class="o">//</span><span class="n">p</span><span class="o">^.</span><span class="n">Name</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;Sam&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">emp</span><span class="o">.</span><span class="n">Age</span>  <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>     <span class="o">//</span><span class="n">p</span><span class="o">^.</span><span class="n">Age</span>  <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">//</span><span class="err">还有一种带</span><span class="n">packed的结构体</span><span class="err">，由于不会进行内存对齐而速度略慢，但用于</span><span class="n">dll时可避免内存混乱</span>
</span></span><span class="line"><span class="cl"><span class="n">type</span>
</span></span><span class="line"><span class="cl">  <span class="n">TRcd</span> <span class="o">=</span> <span class="n">packed</span> <span class="n">record</span>
</span></span><span class="line"><span class="cl">    <span class="n">B</span> <span class="p">:</span> <span class="n">Byte</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">C</span> <span class="p">:</span> <span class="n">Integer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">end</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span>
</span></span><span class="line"><span class="cl"><span class="nx">TEmp</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">emp</span> <span class="nx">TEmp</span>
</span></span><span class="line"><span class="cl">  <span class="nx">p</span>   <span class="o">*</span><span class="nx">TEmp</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">p</span> <span class="p">=</span> <span class="o">*</span><span class="nx">emp</span>
</span></span><span class="line"><span class="cl"><span class="nx">emp</span><span class="p">.</span><span class="nx">Name</span> <span class="p">=</span> <span class="s">&#34;Sam&#34;</span>  <span class="c1">//(*p).Name = &#34;Sam&#34; //p.Name = &#34;Sam&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">emp</span><span class="p">.</span><span class="nx">Age</span>  <span class="p">=</span> <span class="mi">10</span>     <span class="c1">//(*p).Age  = 10    //p.Age  = 10
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="分支">分支<a hidden class="anchor" aria-hidden="true" href="#分支">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//if
</span></span><span class="line"><span class="cl">if 布尔表达式 then ...;
</span></span><span class="line"><span class="cl">//if ... else ...
</span></span><span class="line"><span class="cl">if 布尔表达式 then
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">else
</span></span><span class="line"><span class="cl">  ...;
</span></span><span class="line"><span class="cl">//if ... else if ...
</span></span><span class="line"><span class="cl">if 条件表达式1 then
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">else if 布尔表达式2 then
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">else
</span></span><span class="line"><span class="cl">  ...;
</span></span><span class="line"><span class="cl">//case语句
</span></span><span class="line"><span class="cl">case 选项表达式 of
</span></span><span class="line"><span class="cl">  值1: ...;
</span></span><span class="line"><span class="cl">  值2: ...;
</span></span><span class="line"><span class="cl">else
</span></span><span class="line"><span class="cl">  ...;
</span></span><span class="line"><span class="cl">end;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//if
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">布尔表达式</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//if ... else ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">布尔表达式</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//if ... else if ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">布尔表达式1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">布尔表达式2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//switch
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">switch</span> <span class="nx">选项表达式</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">case</span> <span class="nx">值1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="k">fallthrough</span> <span class="c1">//兼容C语言的case，强制执行下一个case
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">case</span> <span class="nx">值2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">switch</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">case</span> <span class="nx">选项表达式</span> <span class="o">==</span> <span class="nx">值1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="k">case</span> <span class="nx">选项表达式</span> <span class="o">==</span> <span class="nx">值2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">switch</span> <span class="nx">类型表达式</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">case</span> <span class="nx">类型1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="k">case</span> <span class="nx">类型2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="循环">循环<a hidden class="anchor" aria-hidden="true" href="#循环">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//升幂记数循环
</span></span><span class="line"><span class="cl">for 记数变量 := 起始值 to 终点值 do      //起始值&lt;终点值，变量每循环变化1
</span></span><span class="line"><span class="cl">  语句;
</span></span><span class="line"><span class="cl">//降幂记数循环
</span></span><span class="line"><span class="cl">for 记数变量 := 起始值 downto 终点值 do  //起始值&gt;终点值，变量每循环变化1
</span></span><span class="line"><span class="cl">  语句;
</span></span><span class="line"><span class="cl">//高版本支持，2009+？
</span></span><span class="line"><span class="cl">for 循环变量 in 集合 do
</span></span><span class="line"><span class="cl">  语句;
</span></span><span class="line"><span class="cl">//当型循环，当表达式值为真时执行循环
</span></span><span class="line"><span class="cl">while 布尔表达式 do
</span></span><span class="line"><span class="cl">  语句;
</span></span><span class="line"><span class="cl">//直到型循环，当表达式值为真时退出循环
</span></span><span class="line"><span class="cl">repeat
</span></span><span class="line"><span class="cl">  语句;
</span></span><span class="line"><span class="cl">until 布尔表达式;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//类C的for循环
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">循环变量初始化</span><span class="p">;</span> <span class="nx">条件表达式</span><span class="p">;</span> <span class="nx">循环变量改变</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//类C的while循环
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">条件表达式</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//无限循环
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//类C的for each
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">R</span> <span class="p">{</span><span class="c1">//R可为数组、切片、map、字符串等
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="控制语句">控制语句<a hidden class="anchor" aria-hidden="true" href="#控制语句">#</a></h2>
<h3 id="goto">goto<a hidden class="anchor" aria-hidden="true" href="#goto">#</a></h3>
<p>都用来直接跳转到指定标签处继续向下执行。<code>Delphi</code>需要先使用<code>label</code>声明标签，<code>Go</code>则直接使用标签，标签的语法均为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">labelA:
</span></span><span class="line"><span class="cl">  ...
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="continue">continue<a hidden class="anchor" aria-hidden="true" href="#continue">#</a></h3>
<p>都用来结束本次循环并进入下一次循环。在多层循环中，<code>Go</code>还可以在其后跟标签，用来结束标签对应的那层循环并进入下一次循环。</p>
<h3 id="break">break<a hidden class="anchor" aria-hidden="true" href="#break">#</a></h3>
<p>都用来结束当前循环并执行当前循环之后的代码。在多层循环中，<code>Go</code>还可以在其后跟标签，用来结束标签对应的那层循环并执行循环之后的代码。</p>
<h2 id="函数">函数<a hidden class="anchor" aria-hidden="true" href="#函数">#</a></h2>
<p>Delphi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//过程，无返回值
</span></span><span class="line"><span class="cl">procedure Proc1;
</span></span><span class="line"><span class="cl">begin
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">end;
</span></span><span class="line"><span class="cl">procedure Proc2(i1, i2: Integer; s1, s2: string);
</span></span><span class="line"><span class="cl">begin
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">  Proc1;
</span></span><span class="line"><span class="cl">end;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">//函数，有返回值
</span></span><span class="line"><span class="cl">function Func1: string;
</span></span><span class="line"><span class="cl">begin
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">  Result := &#39;返回值&#39;;
</span></span><span class="line"><span class="cl">  Proc2(1, 2, &#39;abc&#39;, &#39;def&#39;);
</span></span><span class="line"><span class="cl">end;
</span></span><span class="line"><span class="cl">function Func2(i1, i2: Integer; s1, s2: string): string;
</span></span><span class="line"><span class="cl">begin
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">  Result := Func1();
</span></span><span class="line"><span class="cl">end;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//无返回值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">i1</span><span class="p">,</span> <span class="nx">i2</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">s1</span><span class="p">,</span> <span class="nx">s2</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="nf">f1</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//有返回值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">f3</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">r</span> <span class="o">:=</span> <span class="s">&#34;返回值&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">r</span> <span class="c1">//必须带 r
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">f4</span><span class="p">()</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">s</span> <span class="p">=</span> <span class="nf">f3</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">s</span> <span class="c1">//可省略 s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">f5</span><span class="p">()</span> <span class="p">(</span><span class="nx">r1</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">r2</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">r1</span><span class="p">,</span> <span class="nx">r2</span> <span class="p">=</span> <span class="nf">f6</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">abc</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">def</span><span class="err">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">r1</span><span class="p">,</span> <span class="nx">r2</span> <span class="c1">//可省略 r1, r2，若不省略，则顺序必须一致
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">f6</span><span class="p">(</span><span class="nx">i1</span><span class="p">,</span> <span class="nx">i2</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">s1</span><span class="p">,</span> <span class="nx">s2</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">r1</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">r2</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">r1</span> <span class="p">=</span> <span class="nx">i1</span> <span class="o">+</span> <span class="nx">i2</span>
</span></span><span class="line"><span class="cl">  <span class="nx">r2</span> <span class="p">=</span> <span class="nx">s1</span> <span class="o">+</span> <span class="nx">s2</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>
<p><code>Delphi</code>无返回值的用<code>procedure</code>，有返回值的用<code>function</code>；<code>Go</code>统一用<code>func</code>。</p>
</li>
<li>
<p>都接受0个或多个参数，<code>Delphi</code>同类型参数间用<code>,</code>分隔，不同类型参数间用<code>;</code>分隔；<code>Go</code>统一用<code>,</code>分隔。</p>
</li>
<li>
<p><code>Delphi</code>函数只能有1个返回值，且返回值固定由<code>Result</code>隐藏变量携带，<code>Result</code>可多次赋值，之后也可有其它语句；<code>Go</code>可以有0个或多个返回值，返回值变量可以声明也可以不声明，但必须由<code>return</code>返回且必须为最后一条语句，若返回值变量有多个且已声明，<code>return</code>后跟的返回值变量顺序必须与定义一致。</p>
</li>
<li>
<p><code>Delphi</code>无参过程/函数调用时，括号<code>()</code>可带可不带；<code>Go</code>无参函数调用时必须带<code>()</code>。</p>
</li>
<li>
<p><code>Delphi</code>被调用的过程/函数必须在主调过程/函数之前实现或在<code>interface</code>区已声明；<code>Go</code>函数没有声明只有实现，且不要求被调函数在主调函数之前定义。</p>
</li>
</ol>
<hr>
<p><em><strong>以下概念比较庞杂，三言两语难以说清楚，暂且告一段落</strong></em></p>
<h2 id="错误处理">错误处理<a hidden class="anchor" aria-hidden="true" href="#错误处理">#</a></h2>
<h2 id="接口">接口<a hidden class="anchor" aria-hidden="true" href="#接口">#</a></h2>
<h2 id="面向对象">面向对象<a hidden class="anchor" aria-hidden="true" href="#面向对象">#</a></h2>
<h2 id="并发">并发<a hidden class="anchor" aria-hidden="true" href="#并发">#</a></h2>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://afrusrsc.github.io/tags/go/">Go</a></li>
      <li><a href="https://afrusrsc.github.io/tags/delphi/">Delphi</a></li>
      <li><a href="https://afrusrsc.github.io/tags/pascal/">Pascal</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://afrusrsc.github.io/posts/program/pascal/delphi_string02/">
    <span class="title">« 上一页</span>
    <br>
    <span>再探Delphi字符串</span>
  </a>
  <a class="next" href="https://afrusrsc.github.io/posts/program/pascal/delphi_field_datasize/">
    <span class="title">下一页 »</span>
    <br>
    <span>关于TField.DataSize的坑</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>© 2017-2025 <a href="https://github.com/afrusrsc">Jesse Jin</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
