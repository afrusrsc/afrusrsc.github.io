<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Pascal | 慢步道人</title>
<meta name="keywords" content="">
<meta name="description" content="慢步道人">
<meta name="author" content="慢步道人">
<link rel="canonical" href="https://afrusrsc.github.io/tags/pascal/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.828576b1a5476849c84c82cb78a8b046f6f0bebcd9505652f39a5ee58fa4dcaf.css" integrity="sha256-goV2saVHaEnITILLeKiwRvbwvrzZUFZS85pe5Y&#43;k3K8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://afrusrsc.github.io/img/icon.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://afrusrsc.github.io/img/icon.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="https://afrusrsc.github.io/img/icon.jpg">
<link rel="apple-touch-icon" href="https://afrusrsc.github.io/img/icon.jpg">
<link rel="mask-icon" href="https://afrusrsc.github.io/img/icon.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://afrusrsc.github.io/tags/pascal/index.xml">
<link rel="alternate" hreflang="zh" href="https://afrusrsc.github.io/tags/pascal/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:title" content="Pascal" />
<meta property="og:description" content="慢步道人" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://afrusrsc.github.io/tags/pascal/" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Pascal"/>
<meta name="twitter:description" content="慢步道人"/>

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://afrusrsc.github.io/" accesskey="h" title="慢步道人 (Alt + H)">
                <img src="https://afrusrsc.github.io/img/icon.jpg" alt="" aria-label="logo"
                    height="30">慢步道人</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://afrusrsc.github.io/search/" title="🔍搜索">
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/posts/" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/archives/" title="📅时间轴">
                    <span>📅时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/tags/" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://afrusrsc.github.io/about/" title="👨🏻‍💻关于">
                    <span>👨🏻‍💻关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://afrusrsc.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://afrusrsc.github.io/tags/">🔖标签</a></div>
  <h1>
    Pascal
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">让应用以单例运行
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
有时候我们会期望所编写的应用只运行一个实例，比如监听网络端口或串口，用Lazarus有两种不同的实现方案。
SingleInstanceEnabled属性 SingleInstanceEnabled是TCustomApplication的属性，在初始化之前设置为True即可轻松实现单实例应用：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 program project1; {$mode objfpc}{$H&#43;} uses AdvancedSingleInstance, //注意：必须引用该单元！！！ Interfaces, Forms, ...; {$R *.res} begin Application.SingleInstanceEnabled := True; //注意：必须在调用 Initialize 前赋值！！！ Application.Initialize; ... Application.Run; end. 特别注意 必须引用AdvancedSingleInstance单元，且该单元必须在Interfaces单元和Forms单元前
必须在调用Application.Initialize前赋值
该方法仅针对同一个可执行文件生效，并非系统全局生效
互斥对象 利用操作系统的互斥对象可实现系统级的单例。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 var AppMutex: THandle; begin Application....</p>
  </div>
  <footer class="entry-footer"><span title='2024-01-26 22:24:01 +0800 CST'>2024-01-26 22:24:01</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to 让应用以单例运行" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_single_instance/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">给json数组中的元素排序
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
起因 基本信息 平台：windows
IDE：Lazarus 2.2.6
json包：FPC自带的fpjson
背景 最近在搞一个小工具，数据文件采用的是json格式，其中一个节点存放的是一组文件的基本信息的清单，这个节点自然就是个json数组，元素就是每个文件基本信息的json对象。界面展示用的是经典的DBGrid &#43; DataSource &#43; DataSet方案，所以会把json数组转为DataSet。
操作过程中会比对磁盘上的文件，该添的添，该删的的删，该改的改，该标记的标记。一番操作下来，顺序自然是乱的，虽然可以操作DataSet或者换用带排序功能的DBGridEh达到排序的目的，但直接看json数据的话，依然是乱序的。因此，期望直接对json数组进行排序。
解决过程 习惯先看源码，如果没有原生解决方案了，或者原生解决方案太别扭了，才会选择第三方解决方案或自己造轮子。
一看源码 1 2 3 4 TJSONArray = class(TJSONData) public ... Procedure Sort(Compare: TListSortCompare); TJSONArray已经提供了排序方法，不过这个参数是什么东西？
1 TListSortCompare = function (Item1, Item2: Pointer): Integer; 嗯，是个函数声明，也就是说具体的算法实现要自己写，可以先找找看有默认的实现没。结果是：没有！那就自己写吧。
看声明，这个函数是要比较两个指针指向的东西，并返回一个整数。嗯，看上去很简单，不过：
到底是怎么实现排序的？
参数是指针，指向的又是什么东西？
返回一个什么样的整数才能实现排序呢？
没懂！！！
还是接着看源码吧：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 procedure TJSONArray....</p>
  </div>
  <footer class="entry-footer"><span title='2023-11-28 21:38:45 +0800 CST'>2023-11-28 21:38:45</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to 给json数组中的元素排序" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_json_order/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">给类型、记录、类添加助手
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
通常情况下，类型和记录是没有方法的，只有类有方法，但是可以通过给类型和记录添加助手来达到类似于类的方法的功能，当然，也可以给类添加助手。
语法 1 2 3 HelperName = class|record|type helper[(OptionalBaseHelper)] for TypeName [properties, procedures, functions, constructors, consts, vars] end [hint modifiers]; 类助手 FPC 2.6&#43;版本可用，ObjFPC模式下无需特别设置。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //定义 TObjectHelper = class helper for TObject function SomeFunc: string; end; //实现 function TObjectHelper.SomeFunc: string; begin Result := &#39;类名:&#39; &#43; Self.ClassName; end; //使用 var o: TObject; begin Writeln(o.SomeFunc); end. 一般情况下，给类添加方法可直接在类中添加，但这样添加的方法会直接在所有后代类中显示，如果只是想在特定的范围内添加方法，就可以使用类助手。...</p>
  </div>
  <footer class="entry-footer"><span title='2023-08-25 20:38:35 +0800 CST'>2023-08-25 20:38:35</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to 给类型、记录、类添加助手" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_helper/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">使用Lazarus压缩/解压zip
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
Lazarus默认已经提供了zip文件的压缩和解压功能，在Zipper单元中，不过，使用过程中还是有一些细节需要注意。
压缩 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 uses Zipper; { 使用类方法进行压缩 } //压缩单个文件 TZipper.Zip(&#39;压缩后的文件.zip&#39;, &#39;待压缩的文件.txt&#39;); //压缩多个文件 TZipper.Zip(&#39;压缩后的文件.zip&#39;, [&#39;待压缩的文件1.txt&#39;, &#39;待压缩的文件2.pdf&#39;]); { 使用实例对象进行压缩 } var zip: TZipper; zip := TZipper.Create; try //压缩单个文件 zip.ZipFile(&#39;压缩后的文件.zip&#39;, &#39;待压缩的文件.txt&#39;); //压缩多个文件 zip.ZipFiles(&#39;压缩后的文件.zip&#39;, [&#39;待压缩的文件1.txt&#39;, &#39;待压缩的文件2.pdf&#39;]); finally zip.Free; end; 以上为比较方便的使用方法，但是还存在一些问题：
以上仅限于文件名为英文的情况，若文件名为中文则会出现乱码（主要是在windows平台上，用专门的压缩/解压工具打开查看列表和解压时）。查看解决方案。
若待压缩的文件包括路径，则压缩后的文件内也会包含传参时传入的路径。查看解决方案。
另外，也可以配合FileName（压缩后的文件名）和Entries（待压缩的文件）属性使用ZipAllFiles方法；或者配合Entries（待压缩的文件）属性使用SaveToFile方法。不过，多次调用前一定要调用Clear方法，否则就会受前一次压缩操作的影响。
解压 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 uses Zipper; { 使用类方法进行解压 } //解压出全部文件 TUnZipper....</p>
  </div>
  <footer class="entry-footer"><span title='2023-07-29 21:31:15 +0800 CST'>2023-07-29 21:31:15</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to 使用Lazarus压缩/解压zip" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_zip02/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">在Lazarus中使用代码模板
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
在Delphi中，可以使用CnPack中代码助手的功能，实现快速编写基础代码，专注于写具体业务、逻辑代码。在Lazarus中，也可以使用代码模板功能，实现相同的需求。
使用方法 将光标移到需要录入代码的位置
按Ctrl&#43;J快捷键，弹出代码模板列表
选择要使用的模板，Enter回车
若模板需要填写参数，可在代码模板插入后，按Tab键在各参数间切换并修改，最后按Esc键或将光标移到其它位置
在模板生成的代码的基础上继续编写代码
注意：
可以先输入部分/完整代码模板的Token，然后再按快捷键；也可以按过快捷键后，继续输入Token剩余部分进一步过滤；当然，也可以组合使用。
先输入Token再按快捷键时，若可唯一确定模板，则会直接应用而不弹出模板列表。
自定义模板 Lazarus默认了一批模板，可以在菜单Tools-&gt;Code Templates ...中进行查看。
若感觉默认模板不合适，可自行修改；若默认模板无法满足使用，也可自行添加。
简要说明 Module：当前使用的代码模板，默认是主配置目录下的lazarus.dci，可点右侧按钮选用其它模板。
Templates：所选代码模板的具体清单，格式为：Token - &#34;说明&#34;。右侧三个按钮用于对模板清单进行维护。
其余部分：所选模板项的详细信息。
最下方的编辑区：代码模板的具体内容，$开头的表示使用的宏代码，|表示模板插入后光标的位置。
Keep indentation：保持代码模板内容的缩进，勾选后代码模板首行在光标处插入，除首行外的缩进量保持原样插入（类似行模式插入）；否则模板首行外的内容与首行保持相对缩进（类似列模式插入）。
Enable Macros：启用宏代码，点Insert Macro可插入预定义的宏。
Auto complate on：自动完成，类似于事件触发，即满足条件后无需按Ctrl&#43;J快捷键直接应用模板。
line break：按回车键时触发
space：按空格键时触发
tab：按Tab键时触发
word end：输入结束字符时触发，可暂时理解为输入;时触发
do not complate selection：暂时还不清楚具体效果
do not add character：可与前四种结合使用，勾选后不会把用来触发的字符插入到代码中，否则会插入用来触发的字符</p>
  </div>
  <footer class="entry-footer"><span title='2023-05-27 21:12:44 +0800 CST'>2023-05-27 21:12:44</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to 在Lazarus中使用代码模板" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_code_templates/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ctypes里的bug？
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
起因 以前使用Delphi调用海康SDK时，专门改写过HCNetSDK.h，当时大部分桌面应用还都是32位的，毕竟64位还没彻底普及开（即便现在，还是有一部分桌面考虑兼容性依然是32位）。后来也搞过64位版的，编译没问题，运行就不成功。虽然没成功，但心里还是清楚这基本上是数据类型的问题，由于对64位了解不多，也就一直搁置着。
转Lazarus之后，又搞过一次64位版，还是没成功。后来知道有ctypes这个单元，也知道这是专门针对c语言数据类型的，但一直没去看过。近来又想起这个事，就想一探究竟。
探 直接看源码，其实就是给pascal的数据类型取了个c的别名。要想了解透彻，自已撸码跑一下还是很有必要的：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 program test; uses SysUtils, ctypes; begin writeln(Format(&#39;%-16s%s&#39;, [&#39;type&#39;, &#39;size&#39;])); writeln(&#39;--------------------&#39;); writeln(Format(&#39;%-16s%d&#39;, [&#39;cint8&#39;, SizeOf(cint8)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cuint8&#39;, SizeOf(cuint8)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cchar&#39;, SizeOf(cchar)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cschar&#39;, SizeOf(cschar)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cuchar&#39;, SizeOf(cuchar)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cint16&#39;, SizeOf(cint16)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cuint16&#39;, SizeOf(cuint16)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cshort&#39;, SizeOf(cshort)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;csshort&#39;, SizeOf(csshort)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cushort&#39;, SizeOf(cushort)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cint32&#39;, SizeOf(cint32)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cuint32&#39;, SizeOf(cuint32)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cint64&#39;, SizeOf(cint64)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cuint64&#39;, SizeOf(cuint64)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;clonglong&#39;, SizeOf(clonglong)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cslonglong&#39;, SizeOf(cslonglong)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;culonglong&#39;, SizeOf(culonglong)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cbool&#39;, SizeOf(cbool)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cint&#39;, SizeOf(cint)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;csint&#39;, SizeOf(csint)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cuint&#39;, SizeOf(cuint)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;clong&#39;, SizeOf(clong)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cslong&#39;, SizeOf(cslong)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;culong&#39;, SizeOf(culong)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;csigned&#39;, SizeOf(csigned)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cunsigned&#39;, SizeOf(cunsigned)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;csize_t&#39;, SizeOf(csize_t)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cfloat&#39;, SizeOf(cfloat)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;cdouble&#39;, SizeOf(cdouble)])); writeln(Format(&#39;%-16s%d&#39;, [&#39;clongdouble&#39;, SizeOf(clongdouble)])); Readln(); end....</p>
  </div>
  <footer class="entry-footer"><span title='2023-04-24 21:20:06 +0800 CST'>2023-04-24 21:20:06</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to ctypes里的bug？" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_ctype/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Lazarus发布v2.2.6版本
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
2023-03-09，Lazarus 团队宣布发布 Lazarus 2.2.6 版本，这是一个错误修复版本，使用 FPC 3.2.2 构建。
大概在Lazarus 2.2.6发布的第二天吧，就把自己电脑上的Lazarus升级到最新了，一直以来都是这个习惯，基本上从来没怎么关心过具体都更新了哪些内容。
不过，这次心血来潮，把发行日志给大致看了下，看了之后还是有点小收获的，在此记录一二。
版本号 Lazarus是IDE，最终完成编译的是FPC，两者的版本号管理策略和Linux内核的策略类似。以下为笔者总结，实际的版本号管理策略未考证。
版本号格式如下：
1 [主版本号].[次版本号].[修订版本号] 其中，次版本号和修订版本号，奇数为开发版，偶数为稳定版。
发行日志 Lazarus 2.2.x发行日志原文。可以看到，这是2.2.0的发行日志，并非2.2.6的发行日志，说明这是按次版本号统一整理的。
由于内容较多，而且部分内容笔者也没接触/使用过，所以，只拣熟悉的或感觉比较重要的拿出来分享一下。
LazUtils包 移除PasWStr单元 原因：只有当编译器版本低于3.0才包含代码。
补救：不要再使用PasWStr
LCL包 TValueListEditor 旧行为：允许在键列中使用当前的NameValueSeparator（默认情况下：=）。
新行为：不能在键列中使用名称值分隔符。如果在键列中键入名称值分隔符，焦点将移动到值列。如果将其粘贴到列中，它将被删除（没有任何反馈或警告）。
Screen添加了三组新方法 BeginTempCursor / EndTempCursor、BeginWaitCursor / EndWaitCursor和BeginScreenCursor / EndScreenCursor用于临时光标更改，而不是直接设置Screen.Cursor属性。
TGroupBox，TRadioGroup，TCheckGroup Win32旧行为：可以设置属性颜色，它直接显示。
Win32新行为：如果要更改颜色，则必须设置ParentBackground := False;
TFrame Win32旧行为：无法更改TFrame的颜色。
Win32新行为：如果要更改颜色，则必须设置ParentBackground := False;
T(Float)SpinEdit 新增了EditorEnabled属性，以禁用编辑中的直接用户输入。如果设置为False，则用户只能使用微调器或箭头键更改值。
Debugger LazDebugger-FP (FpDebug) v1.0成为Windows和Linux默认的调试器。
GDB(mo)使用修改版的GDB 9.2
笔者补充：FpDebug无法调试dll，需要使用GDB
组件 OpenGL全面支持Qt5的widgetset。
TSpinEditEx 新属性ThousandSeparator允许显示插入了千位分隔符的值。
TFloatSpinEditEx 支持以科学计数法形式的文本进行录入。
新属性DisplayMode，用于控制是否使用科学记数法。
新属性property控制以科学记数法显示值时使用的精度。
还有其它许多更改，详细请看原文。</p>
  </div>
  <footer class="entry-footer"><span title='2023-04-06 20:43:52 +0800 CST'>2023-04-06 20:43:52</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to Lazarus发布v2.2.6版本" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_v2_2_6/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Lazarus开发环境配置
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
前言 做为一个桌面应用开发者，工作中一直使用的是Delphi（是语言，也是IDE，基于pascal语言），无论是经典的D7，还是现下最新的XE，都有着还算丰富的使用经验吧，虽然这两者都各有优缺点。做为团队开发成员之一，具体使用什么，几乎是没什么选择权的，毕竟公司有自己的技术栈，当然还有相应的技术债。
但是，做为一个个人开发者，还是比较喜欢严谨的pascal语言的（其实Go的一些语法就是借鉴pascal的，比如：类型在变量右侧），而且还有着那么多年的开发经验，理论上来说，写个小工具啊什么的，还是应该选择熟悉的Delphi才是，但是Delphi并不符合个人的选择条件：
不要太重量级
有当前比较流行的特性
有相对活跃的社区
D7以现在的眼光来看，绝对算是足够轻量级的，整个环境（不含三方组件）安装完还不到1G，但是是毕竟是二十年前的东西了，不说新特性，一些陈年bug就够喝一壶了。
相对来说，XE却是一直在更新着，新特性是有了，但是仅安装包就7~9G，只安装桌面开发必须的自带组件，安装完也有15G&#43;，而且正版授权巨贵，社区版限制又巨多。
至于有相对活跃的社区这条，国外应该还行，但对英文渣渣来说还是有点难了；而国内，Delphi都是快绝迹的语言了，当我什么都没说吧。
所以，选来选去，也就只剩开源的Lazarus和CodeTyphon（基于Lazarus）了。原本是看中了CodeTyphon的，但是死活在Bug10上安装不成功，也就只能选Lazarus了，不过Lazarus倒也是越用越顺心了。
虽说Lazarus标榜的一次编写，到处编译，不过，实际用到的几乎都是windows平台，至于其它平台，有机会再说吧。
开发环境 以下以Lazarus 2.2.4为例。
安装IDE Lazarus有32位版本和64位版本，而且都互相有对方架构的插件包，个人尝试后还是觉得分别安装两个版本比较合适（不要质疑，真的可以同时安装多个版本，不同架构、不同版本号都可以）。
由于Bug10不愧是Bug10，所以个人还是喜欢整成免安装版本，万一哪天Bug10作妖，就不怕重新折腾了。
在非系统盘下手动创建目录，比如D:\lazarus和D:\lazarus\config，前者是IDE的安装目录，后者是IDE的配置目录
下载并运行安装包
在选择目标位置这一步时，选择之前手动创建的安装目录，同时勾选创建一个新的第二的安装（不要质疑，哪怕是第一次安装），下一步
到选择配置文件夹这一步，选择之前手动创建的配置目录，然后一路下一步
安装完之后，把安装目录备份一下，再把IDE卸载了，然后把安装目录恢复了（当然，这一步也可以不做）
运行lazarus.exe，首次运行时（包括未来重装系统后）会弹出Welcom to Lazarus IDE的窗口，其中Fppkg项会有叹号（似乎是2.2版本之后才有的），点Restore Fppkg configuration，再点Write new configuration files，最后点Start IDE
可以为lazarus.exe创建快捷方式
至此，IDE就算是安装完了，需要的话可以把安装目录整个压缩备份，不过个人还是建议把IDE配置好了再备份
IDE配置 构建配置 由于Lazarus每次安装三方组件都要重新build，如果三方组件装得多了，IDE的exe会很大（不是你自己写的exe），而个人又是比较喜欢小巧的，所以这一步是少不了的。
菜单Tools-&gt;Configure &#34;Build Lazarus&#34;
Profile to build项选择Optimized IDE
点Build会立即重新构建IDE；点Save Settings仅保存配置，下次构建时生效
一体式窗口 安装完之后，IDE默认是D7那种分离式窗口，在小分辨率屏幕的时代很有用，不过现在嘛，个人感觉还是一体式窗口比较舒服。Lazarus已经提供了这样的包，只不过默认并没有启用。
菜单Package-&gt;Install/Uninstall Packages ...
右侧选择AnchorDockingDsgn 1.0，点Install selection或双击
点Save and rebuild IDE重新构建，IDE重启之后就是一体式的窗口了
拖动子窗口的标题，会自动吸附，调整为自己喜欢的布局，重启IDE即可
此时，若是不小心把布局调乱了，就不好恢复了，所以可以考虑把自动保存布局功能给关了：
菜单Tools-&gt;Desktops ...，去掉Auto save active desktop的勾，关闭 其它配置 菜单Tools-&gt;Options ...是IDE集中的配置，可依自己习惯或喜好进行配置。不过，倒是可以分享些个人的配置及相应的考虑，以供参考：...</p>
  </div>
  <footer class="entry-footer"><span title='2023-02-25 23:52:38 +0800 CST'>2023-02-25 23:52:38</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to Lazarus开发环境配置" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_ide_config/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">FPHTTPClient请求https
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
在客户端不需要证书的情况下，简单两步操作即可让TFPHTTPClient实现https的请求：
在源码中引用opensslsockets单元
在生成目录下加入动态库libcrypto-1_1.dll和libssl-1_1.dll</p>
  </div>
  <footer class="entry-footer"><span title='2023-02-17 20:59:53 +0800 CST'>2023-02-17 20:59:53</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to FPHTTPClient请求https" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_fphttpclient_https/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Lazarus连数据库的那点坑
    </h2>
  </header>
  <div class="entry-content">
    <p>从其它平台迁移而来
环境 Lazarus v2.2.4(32位/64位)
MySQL 8.0.31 64位
PostgreSQL 15.1 64位
坑 MySQL Lazarus v2.2.4已内置MySQL8.0的TMySQL80Connection组件，但是连接时却提示Can not load MySQL library &#34;libmysql.dll&#34;. Please check your installation.使用64位编译，放进64位MySQL8.0.31的libmysql.dll仍然报该错，一直到把版本降到5.7系列才正常，换32位编译，同样的结果：使用5.7系列的libmysql.dll可正常使用。
PostgreSQL 连接PostgreSQL时，同样遇到与MySQL类似的报错：Can not load PostgreSQL client library &#34;libpq.dll&#34;. Check your installation.按照与MySQL相同的思路，版本从15.1一直降到目前支持的最低版本9.2.24，仍然报错！
查一下官方论坛，各种方式试了一通，发现64位的程序除libpq.dll外，v11&#43;还需要libcrypto-3-x64.dll、libiconv-2.dll、libintl-9.dll、libssl-3-x64.dll和libwinpthread-1.dll；v9.4~v10.23还需要libcrypto-1_1-x64.dll、libiconv-2.dll、libintl-8.dll、libssl-1_1-x64.dll。
而32位程序，最高可用版本为v10.23，除libpq.dll外，还需要libcrypto-1_1.dll、libiconv-2.dll、libintl-8.dll、libssl-1_1.dll，必要时可能还需要VC运行时。</p>
  </div>
  <footer class="entry-footer"><span title='2022-12-24 22:03:38 +0800 CST'>2022-12-24 22:03:38</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;慢步道人</footer>
  <a class="entry-link" aria-label="post link to Lazarus连数据库的那点坑" href="https://afrusrsc.github.io/posts/program/pascal/lazarus_connection/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://afrusrsc.github.io/tags/pascal/">
      «&nbsp;上一页&nbsp;1/8
    </a>
    <a class="next" href="https://afrusrsc.github.io/tags/pascal/page/3/">下一页&nbsp;3/8&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>© 2017-2025 <a href="https://github.com/afrusrsc">Jesse Jin</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
